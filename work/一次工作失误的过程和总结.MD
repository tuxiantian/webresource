---
typora-root-url: ..
---

诸城原有一个注册送10元、认证送108元、缴纳保证金送100元共送218元优惠券的活动，最近新配了一个新的注册即送218的活动。
![](/images/work/一次工作失误的过程和总结/1.png)
如上图配优惠券的工作是比较繁琐的，我配完检查完优惠券的金额没有问题，就把旧的送优惠券的活动忘了停掉了。发现这个事情的时候已经是3天后了。  
若我在开始执行时，列一个任务步骤清单，逐步执行，就不会忘记停活动的问题。以后一定要养成这样的做事习惯。  
统计同时领取2种活动优惠券的sql如下：
```sql
select DISTINCT(`USERID`)  userid
  from `t_coupon` p
 where p.`SOURCEINFO`= 21 AND p.`SOURCE` =1
   and exists(
select 1
  from `t_coupon` p2
 where p2.`USERID`= p.`USERID`
   and p2.`SOURCEINFO`= 24 AND p2.`SOURCE` =1
   )
```
这个sql我现场并没有想起来，还是电话咨询同事的。看来我的sql的功底还是不行，关键时刻水平就看出来了。以后工作有富余时间还是应该多看看sql。  
把统计结果发给领导时，数据没有滤重，导致查的用户是双份的。结果直接被领导发现重复了。真是丢人丢大了。
下面的sql统计出来的用户，同一个用户会出现两次。我也不知道为什么？
```
select  userid
  from `t_coupon` p
 where p.`SOURCEINFO`= 21 AND p.`SOURCE` =1
   and exists(
select 1
  from `t_coupon` p2
 where p2.`USERID`= p.`USERID`
   and p2.`SOURCEINFO`= 24 AND p2.`SOURCE` =1
   )
```
领导让我统计多送出去的优惠券数量  
176*10+48*118+15*218=46,512,262  
我直接一算就把结果发过去了。其实上述结果是存在问题的，包含了重复计算。   
正确的计算方式是下面这样：  
176*10+48*108+15*100=1760+5184+1500=8444  
我当时怎么就不多思考思考呢？这直接让人感觉我的能力不行。做事太不专业了。  
总结
1. 专业能力不足，体现在sql语句写不出来，写出来的又有问题。
2. 做事的方法不对，对于繁琐复杂的工作应该有一个任务步骤清单。
3. 做事不专业，结果送给领导前没有复审、复查。

领导对我工作能力的肯定需要很多事，而否定一个人只需要一件糟糕的事。
